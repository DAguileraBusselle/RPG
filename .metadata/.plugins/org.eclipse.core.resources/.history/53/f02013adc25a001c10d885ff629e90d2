package main;


import java.awt.EventQueue;

import control.Listener;
import entidades.Inventario;
import entidades.Jugador;
import entidades.ObjetoActivo;
import entidades.ObjetoPasivo;
import mapa.generacionMapa;
import view.VRPG;

public class RPG {

	public static String TEXTO_PANTALLA = "";
	
	public static int ULTIMO_PISO = 100;
	
	public static int PISO = 1;
	
	public static int POSIBILIDAD_TESORO = 3;
	
	public static int POSIBILIDAD_ENEMIGO = 20;
	
	public static boolean clear = false;

	public static char[][] mapa;
	
	public static int contVictoria = 0;
	
	public static int EXPERIENCIA = 0;
	
	public static int posJugY = 0;
	public static int posJugX = 0;
	
	public static int VIDA_MAX = 350;
	
	public static Jugador jugador = new Jugador(1, VIDA_MAX, 1, 45, new Inventario(null, null, new ObjetoActivo("pocion simple", "cura 25 puntos de vida", "cura", 25 , 15), null, null, null, null));
	
	public static void main(String[] args) {
		
			EventQueue.invokeLater(new Runnable() {
			
			@Override
			public void run() {
				VRPG vrpg = new VRPG();
				
				Listener listener = new Listener(vrpg);
				vrpg.setListener(listener);
				
				
				vrpg.hacerVisible();
				
			}
		});
		
		while (PISO <= ULTIMO_PISO) {
			mapa = generacionMapa.generarMapa();
			
			for (int i = 0; i < 50; ++i) System.out.println();
			
			generacionMapa.mostrarMapa(mapa);
			
			while(!clear) {
				generacionMapa.navegarMapa(mapa);
				for (int i = 0; i < 50; ++i) System.out.println();
				generacionMapa.mostrarMapa(mapa);
				
				if(!generacionMapa.hayMonstruos(mapa) && contVictoria == 0) {				
					
					mapa[mapa.length - 1][mapa[0].length - 1] = 'E';
					
					
					for (int i = 0; i < 50; ++i) System.out.println();
					generacionMapa.mostrarMapa(mapa);
					TEXTO_PANTALLA += "\nSE HA ABIERTO LA PUERTA";
					System.out.println("SE HA ABIERTO LA PUERTA");
					contVictoria ++;
				}
				
				
			}
			
			PISO ++;
			
			jugador.getInventario().getItem1().setCantidad(jugador.getInventario().getItem1().getCantidad() + (PISO * 10));
			posJugY = 0;
			posJugX = 0;
			
			clear = false;
		}
		
		TEXTO_PANTALLA += "\nHAS ESCAPADO DEL DUNGEON";
		System.out.println("HAS ESCAPADO DEL DUNGEON");
		
		

	}

}
